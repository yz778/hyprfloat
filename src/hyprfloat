#!/usr/bin/env lua

local function get_real_script_dir()
    local p = debug.getinfo(1, "S").source:sub(2)
    local h = io.popen("readlink -f " .. p)
    local r = h:read("*l")
    h:close()
    return r:match("(.*/)") or "./"
end

local script_dir = get_real_script_dir()
package.path = script_dir .. "?.lua;" .. script_dir .. "?/init.lua;" .. package.path

-- Load and run the main library
local lib = require("lib")
lib.run(arg)
